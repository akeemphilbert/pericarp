package application

import (
	"github.com/segmentio/ksuid"
)

{{range .Queries}}
// {{.Name}} represents a query to {{.Description}}
type {{.Name}} struct {
	{{range .Properties}}{{.Name | pascalCase}} {{.Type | goType}} `{{jsonTag .Name .Required}}{{if .Validation}} {{validationTag .}}{{end}}`
	{{end}}
}

// QueryType returns the query type identifier
func (q {{.Name}}) QueryType() string {
	return "{{.Name}}"
}

// Validate validates the query data
func (q {{.Name}}) Validate() error {
	{{range .Properties}}{{if .Required}}if q.{{.Name | pascalCase}} == {{.Type | goType | zeroValue}} {
		return errors.New("{{.Name | snakeCase}} is required")
	}
	{{end}}{{end}}
	return nil
}

{{end}}